!function(){function a(a,b){for(var d=0;d<a.length;d++){var e=a[d].url,f=a[d].lang;$.ajax({dataType:"json",url:e,async:!1,success:function(a){b.translations(f,a)},error:function(a){var b;switch(a.status){case 404:b="No translations file found at url: "+e;break;default:b="Something is wrong with translations file at url: "+e}c.error={message:b,status:a.status}}})}}var b={},c={};$.ajax({dataType:"json",url:"angular/config/applicationConfiguration.json",async:!1,success:function(a){b=a},error:function(a){var b;switch(a.status){case 404:b="No application config file found at url: angular/config/applicationConfiguration.json";break;default:b="Something is wrong with application config file at url: angular/config/applicationConfiguration.json"}c.error={message:b,status:a.status}}}).always(function(){angular.element(document).ready(function(){angular.bootstrap(document,["wordStormApp"])})});var d=angular.module("wordStormApp",["wordStormApp.components","wordStormApp.services","wordStormApp.filters","wordStormApp.pages","pascalprecht.translate","ui.router","ngCookies","ui.bootstrap","angular.filter","perfect_scrollbar"]);d.constant("config",b),d.config(["$locationProvider","config",function(a,b){var c=b.html5Mode||!1;a.html5Mode({enabled:c,requireBase:!0})}]),d.config(["$translateProvider","config",function(b,c){var d=c.allowedLanguages,e=[];if(null!=d){for(var f=0;f<d.length;f++){var g=d[f];e.push({url:"angular/languages/locale-"+g+".json",lang:g}),e.push({url:"angular/languages/errors-"+g+".json",lang:g})}a(e,b),b.preferredLanguage(c.defaultLanguage)}}]),d.config(["$httpProvider",function(a){a.interceptors.push("httpInterceptor")}]),d.run(["pages",function(a){null!=c.error&&c.error!={}&&a.error(c.error)}]),d.run(["$rootScope","pages",function(a,b){a.pages=b}]),angular.module("wordStormApp.services",[]),angular.module("wordStormApp.filters",[]),angular.module("wordStormApp.components",[]),angular.module("wordStormApp.pages",[])}(),function(){function a(a){a.decorator("$exceptionHandler",["$delegate","$injector",function(a,b){var c;return function(d,e){if(a(d,e),c=c||b.get("pages"),null!=c&&!c.isPageOpened("error")){var f={};f.message=d.message,f.stackTrace=d.stack,c.error({error:f})}}}])}angular.module("wordStormApp").config(a),a.$inject=["$provide"]}(),function(){function a(a,c){var d,e;return{request:function(a){return a},requestError:function(a){return a},response:function(a){return"GET"==a.config.method&&"html"==a.config.url.split(".").pop()?a:a.data},responseError:function(a){switch(d=d||c.get("pages"),e=e||c.get("userPanelService"),a.status){case b.RESPONSE:return a.data?{responseError:a.data.Errors}:null;case b.AUTHORIZATION:return e.logPersonOut(),d.authError(),a||{};case b.NOT_FOUND:if(!d.isPageOpened("error")){var f={type:"Resource could not be found",status:a.status,statusText:a.statusText,url:a.config.url,method:a.config.method,headers:a.config.headers};d.error(f)}return{responseError:[]};default:if(!d.isPageOpened("error")){var f={type:"Problem with services",data:a.data,status:a.status,statusText:a.statusText,url:a.config.url,method:a.config.method,headers:a.config.headers};d.error(f)}return{responseError:[]}}}}}angular.module("wordStormApp").factory("httpInterceptor",a);var b={RESPONSE:422,AUTHORIZATION:401,NOT_FOUND:404};a.$inject=["$q","$injector"]}(),function(){function a(a,b){function c(b,c,d,e){a.state(b,{url:c,template:d,params:e||{}})}b.otherwise("/home"),c("home","/home","<main-page></main-page>"),c("register","/register","<register-page></register-page>",{title:"register.pageTitle"}),c("error","/error","<error-page></error-page>",{title:"error.page.pageTitle",error:null}),c("myLibrary","/my-library","<my-library-page></my-library-page>",{title:"myLibrary.pageTitle"}),c("publicLibrary","/public-library","<public-library-page></public-library-page>",{title:"publicLibrary.pageTitle"}),c("collection","/collection/{collectionName}/{collectionId}","<collection-page></collection-page>",{title:"myLibrary.collection.show.pageTitle",collectionId:null,collectionName:null}),c("collectionPreview","/collection/preview/{collectionName}/{collectionId}","<collection-page view='preview'></collection-page>",{title:"publicLibrary.collection.preview.pageTitle",collectionId:null,collectionName:null}),c("addCollection","/collection/add","<collection-page view='add'></collection-page>",{title:"myLibrary.collection.add.pageTitle"}),c("editCollection","/collection/edit/{collectionName}/{collectionId}","<collection-page view='edit'></collection-page>",{title:"myLibrary.collection.edit.pageTitle",collectionId:null,collectionName:null}),c("authError","/authorization-error","<authorization-error-page></authorization-error-page>",{title:"authError.pageTitle"}),c("word","/word/{word}/{wordId}","<word-page></word-page>",{title:"myLibrary.word.show.pageTitle",word:null,wordId:null}),c("addWord","/word/add/{collectionName}/{collectionId}","<word-page view='add'></word-page>",{title:"myLibrary.word.add.pageTitle",collectionId:null,collectionName:null}),c("editWord","/word/edit/{word}/{wordId}","<word-page view='edit'></word-page>",{title:"myLibrary.word.edit.pageTitle",word:null,wordId:null}),c("learning","/learning/{collectionName}/{collectionId}/{tier}","<learning-page></learning-page>",{title:"myLibrary.learning.pageTitle",collectionName:null,collectionId:null,tier:null}),c("uploadFile","/upload-file","<upload-file-page></upload-file-page>",{title:"uploadFile.pageTitle"})}angular.module("wordStormApp").config(a),a.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function a(a){function c(c){a.putObject(b.CREDENTIALS,c)}function d(){var c="",d=a.getObject(b.CREDENTIALS);return null!=d&&(c=d.token_type+" "+d.access_token),c}function e(){a.remove(b.CREDENTIALS)}function f(c){var d=i[b.SETTINGS];return d||(d=a.getObject(b.SETTINGS),i[b.SETTINGS]=d),d?d[c]:null}function g(c,d){var e=a.getObject(b.SETTINGS)||{};e[c]=d,i[b.SETTINGS]=e,a.putObject(b.SETTINGS,e)}var h=this,i={};h.credentials={store:c,createHeader:d,remove:e},h.settings={store:g,get:f}}angular.module("wordStormApp.services").service("cookies",a),a.$inject=["$cookies"];var b={CREDENTIALS:"credentials",SETTINGS:"settings"}}(),function(){function a(a,b,c){function d(a){var b=null;return a&&(b=a.toString().toLowerCase().replace(/\s+/g,"-")),b}var e=this;e.home=function(b){a.go("home",b)},e.register=function(b){a.go("register",b)},e.error=function(c){b.clearAllCaches(),a.go("error",{error:c})},e.authError=function(c){b.clearAllCaches(),a.go("authError",c)},e.myLibrary={allCollections:function(){a.go("myLibrary")},collection:function(b,c){a.go("collection",{collectionId:b,collectionName:d(c)})},collectionPreview:function(b,c){a.go("collectionPreview",{collectionId:b,collectionName:d(c)})},addCollection:function(){a.go("addCollection")},editCollection:function(b,c){a.go("editCollection",{collectionId:b,collectionName:d(c)})}},e.publicLibrary={main:function(){a.go("publicLibrary")}},e.word={show:function(b,c){a.go("word",{word:c,wordId:b})},add:function(b,c){a.go("addWord",{collectionId:b,collectionName:d(c)})},edit:function(b,c){a.go("editWord",{word:d(c),wordId:b})}},e.learning={main:function(b,c,e){a.go("learning",{collectionId:b,collectionName:d(c),tier:e})}},e.uploadFile=function(){a.go("uploadFile")},e.isPageOpened=function(b){return a.is(b)},e.getCurrentPagetitle=function(){var b=a.params.title,d=c.instant("application.title");return b&&(d=c.instant(b)+" - "+d),d}}angular.module("wordStormApp.services").service("pages",a),a.$inject=["$state","restCache","$translate"]}(),function(){function a(a){function b(b,e,f,g,h,i){var j=null;if(h){if(j=c(b,e),null==j||i){var k=a.createGetPromise(e,f,g);d(b,e,k),j=k}}else j=a.createGetPromise(e,f,g);return j}function c(a,b){var c=g(a);return c[b]}function d(a,b,c){var d=g(a);d[b]=c}function e(a){i[a]=null}function f(){i={}}function g(a){return i[a]=i[a]||{},i[a]}var h=this,i={};h.clearCache=e,h.clearAllCaches=f,h.get=b}angular.module("wordStormApp.services").service("restCache",a),a.$inject=["restConfig"]}(),function(){function a(a,b,c,d,e){function f(b,d,e){return c.get(a.restApi+b,1!=e?j(d):d)}function g(b,d,e,f){return c({method:"DELETE",url:a.restApi+b,data:d,headers:1!=f?j(e).headers:e})}function h(b,d,e,f){return c.post(a.restApi+b,angular.toJson(d),1!=f?j(e):e)}function i(b,d,e,f){return c.put(a.restApi+b,angular.toJson(d),1!=f?j(e):e)}function j(a){var b=a||{};return b.headers=b.headers||{},b.headers["Content-Type"]=b.headers["Content-Type"]||"application/json",b.headers.Authorization=b.headers.Authorization||d.credentials.createHeader(),b}var k=this;k.createGetPromise=f,k.createPostPromise=h,k.createDeletePromise=g,k.createPutPromise=i}angular.module("wordStormApp.services").service("restConfig",a),a.$inject=["config","$q","$http","cookies","restMock"]}(),function(){function a(a,b,c){function d(){var b=c.credentials.createHeader();return a(function(){return b.length>0},1e3)}function e(a){return b.when()}var f=this;f.isPersonLogged=d,f.logout=e}angular.module("wordStormApp.services").service("restMock",a),a.$inject=["$timeout","$q","cookies"]}(),function(){function a(a,b,c){function d(a){return b.createPostPromise("Register",a)}function e(a,c){return b.createPostPromise("Login",{Email:a,Password:c},null,!0)}function f(){return a.clearAllCaches(),c.logout()}function g(){return b.createGetPromise("User/Token")}function h(){return a.get("userCache","User/Profile",null,null,!0)}function i(b,c,d,e){return a.get("collectionsCache","Collection",null,null,d,e)}function j(c){return a.clearCache("collectionsCache"),b.createPostPromise("Collection",c)}function k(b,c,d){return a.get("collectionsCache","Collection/"+b,null,null,c,d)}function l(c){return a.clearCache("collectionsCache"),b.createDeletePromise("Collection/Delete/"+c)}function m(c){return a.clearCache("collectionsCache"),b.createDeletePromise("Collection/Delete",c)}function n(c){return a.clearCache("collectionsCache"),b.createPutPromise("Collection",c)}function o(b,c,d,e){return a.get("publicCollections","Collection/Public",null,null,d,e)}function p(c,d){return a.clearCache("wordsCache"),a.clearCache("collectionsCache"),b.createPostPromise("Word/"+c,d)}function q(c){return a.clearCache("wordsCache"),a.clearCache("collectionsCache"),b.createDeletePromise("Word",c)}function r(b,c,d){return a.get("wordsCache","Word/"+b,null,null,c,d)}function s(c){return a.clearCache("wordsCache"),a.clearCache("collectionsCache"),b.createPutPromise("Word",c)}function t(c,d){return a.clearCache("wordsCache"),a.clearCache("collectionsCache"),b.createPostPromise("Word/Tier",[{Id:c,IsKnown:d}])}function u(){return a.get("commonCache","Common/PartOfSpeech",null,null,!0)}var v=this;v.register={create:d},v.user={login:e,isLogged:g,logout:f,profile:h},v.collection={getAll:i,create:j,get:k,remove:l,removeList:m,edit:n,getPublic:o},v.word={create:p,remove:q,get:r,edit:s,isKnown:t},v.common={partOfSpeech:u}}angular.module("wordStormApp.services").service("rest",a),a.$inject=["restCache","restConfig","restMock"]}(),function(){function a(a,b){function c(b,c){return a.settings.get(b)}function d(b,c){a.settings.store(b,c)}var e={DEFAULT_LIST_TYPE:{get:function(){return c("defaultListType")||"grid"},set:function(a){return d("defaultListType",a)}},DEFAULT_LIST_PAGINATION:{get:function(){return c("defaultListPagination")||b.defaultPaginationSize},set:function(a){return d("defaultListPagination",a)}},DEFAULT_SPECIAL_CHARACTERS_COLOR:{get:function(){return c("defaultSpecialCharactersKeyboardColor")||"green"},set:function(a){return d("defaultSpecialCharactersKeyboardColor",a)}}};return e}angular.module("wordStormApp.services").service("settings",a),a.$inject=["cookies","config"]}(),function(){function a(a){return function(b,c){if(b=null!=b?b.toString():"",c){var d=c.replace(/\s/g,"|"),e=new RegExp("("+d+")","gi");b=b.replace(e,'<span class="highlighted">$&</span>')}return a.trustAsHtml(b)}}angular.module("wordStormApp.filters").filter("highlight",a),a.$inject=["$sce"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/authorization-error/authorization-error-page.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(){}angular.module("wordStormApp.pages").directive("authorizationErrorPage",a),b.$inject=[]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/collection/collection-page.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{view:"@"}}}function b(a,b,e,f,g){function h(){K.selectedView=null!=K.view?c[K.view]:c[d.LIST],l()?K.addCollectionFormData=C():i(!0).then(function(a){m()?K.addCollectionFormData=C():(K.parametersForWords=o(),K.listableDataEvents=p(),K.view!=d.PREVIEW&&n())})}function i(b,c){return L=!0,e.collection.get(a.collectionId,b,c).then(function(a){a.Result&&(K.collection=a.Result),L=!1})}function j(){return L}function k(){b.myLibrary.collection(K.collection.Id,K.collection.Name)}function l(){return K.view==d.ADD}function m(){return K.view==d.EDIT}function n(){O=[];for(var a=K.collection.Words,b=0;b<a.length;b++)null!=a[b].Tier&&O.indexOf(a[b].Tier)<0&&O.push(a[b].Tier);O.length>0&&(N=O[0])}function o(){return{removeItem:q,selectedItems:[]}}function p(){return{onViewChange:function(){K.parametersForWords.selectedItems=[]}}}function q(b){for(var c=K.collection.Words,d=0;d<c.length;d++)c[d].Id==b&&c.splice(d,1);return e.collection.get(a.collectionId,!0,!0)}function r(){return N}function s(){return[0,1,2,3,4]}function t(a){u(a)&&(N=a)}function u(a){return O.indexOf(a)>=0}function v(a){var b=!1;return a.Tier==r()&&(b=!0),b}function w(a,b){for(var c=x(b),d=c.split(" "),e=0;e<d.length;e++){var f=d[e],g=x(a.Word);if(!(g.indexOf(f)>=0)){for(var h=a.Translations,i=!1,j=0;j<h.length;j++){var k=x(h[j].Translation);if(k.indexOf(f)>=0){i=!0;break}}if(!i)return!1}}return!0}function x(a){return null!=a?a.toString().toLowerCase().replace(/\s+/g," "):""}function y(){b.myLibrary.editCollection(K.collection.Id,K.collection.Name)}function z(){return K.parametersForWords.selectedItems.length>0}function A(){return M}function B(){var a=K.parametersForWords.selectedItems;M=!0,e.word.remove(a).then(function(b){b.Result&&(g.addGlobalAlert({title:"messages.words.remove.success",titleParams:{wordsCount:a.length},type:"success"}),K.parametersForWords.selectedItems.length=0),i(!0,!0),M=!1})}function C(){return{Name:null!=K.collection?K.collection.Name:null,IsPublic:null!=K.collection&&K.collection.IsPublic,Id:null!=K.collection?K.collection.Id:null}}function D(a){a.$setPristine(),a.$setUntouched(),K.addCollectionFormData=C()}function E(a){l()?F():m()&&G()}function F(){K.formSending=!0,e.collection.create([K.addCollectionFormData]).then(function(a){if(a.Result){var c=a.Result[0];b.myLibrary.collection(c.Id,c.Name)}K.formSending=!1})}function G(){K.formSending=!0,e.collection.edit([K.addCollectionFormData]).then(function(a){if(a.Result){var c=a.Result[0];b.myLibrary.collection(c.Id,c.Name)}K.formSending=!1})}function H(){var a=!1;return I()&&(a=J()),a}function I(){return K.addCollectionFormData.Name}function J(){var a=C();return a.Name!=K.addCollectionFormData.Name||a.IsPublic!=K.addCollectionFormData.IsPublic}var K=this,L=!1,M=!1,N=null,O=null;K.formSending=!1,K.selectedView=null,K.collection=null,K.parametersForWords=null,K.addCollectionFormData=null,K.showAllCollections=b.myLibrary.allCollections,K.showPublicLibrary=b.publicLibrary.main,K.isLoading=j,K.addWord=b.word.add,K.showCollection=k,K.refreshCollection=i,K.wordsListFilter=w,K.listableDataEvents=null,K.isAnyWordSelected=z,K.removeSelectedWords=B,K.isRemovingWords=A,K.clearForm=D,K.sendForm=E,K.canSave=H,K.hasChanged=J,K.editCollection=y,K.openLearning=b.learning.main,K.getCurrentTier=r,K.getTiersList=s,K.reduceWordsToTier=v,K.changeCurrentTier=t,K.isTierActive=u,h()}angular.module("wordStormApp.pages").directive("collectionPage",a);var c={add:"angular/pages/collection/views/collection-page-form.html",edit:"angular/pages/collection/views/collection-page-form.html",list:"angular/pages/collection/views/collection-page-words-list.html",preview:"angular/pages/collection/views/collection-page-preview.html"},d={ADD:"add",EDIT:"edit",LIST:"list",PREVIEW:"preview"};b.$inject=["$stateParams","pages","rest","config","alerts"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/error/error-page.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a){function b(){var a=angular.copy(c.error);return a.stackTrace=null!=a.stackTrace?a.stackTrace.split("\n"):void 0,JSON.stringify(a,void 0,5)}var c=this;c.error=a.error,c.errorInfo=b()}angular.module("wordStormApp.pages").directive("errorPage",a),b.$inject=["$stateParams"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/learning/learning-page.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b,f){function g(){c.INITIALIZING=!0,w.currentView=e.LEARNING,h().then(function(){null!=w.words&&w.words.length>0?(i(),s()):w.currentView=e.NO_WORDS,c.INITIALIZING=!1})}function h(d,e){var f=a.collectionId;return c.COLLECTION=!0,b.collection.get(f).then(function(a){a.Result&&(w.collection=a.Result,w.words=a.Result.Words),c.COLLECTION=!1})}function i(){d.knownWords=[],d.unknownWords=[],d.orders=[],d.words=w.words?angular.copy(w.words):[],w.results=null}function j(){return c.COLLECTION||c.INITIALIZING}function k(){return c.WORD_KNOWN}function l(){return c.WORD_UNKNOWN}function m(){var a=0;return null!=w.words&&null!=d.knownWords&&(a=100*d.knownWords.length/w.words.length),a}function n(){var a=0;if(null!=w.words&&null!=d.unknownWords){var b=d.unknownWords.length;w.currentWord&&w.currentWord.__isUnknown&&(b+=1),a=100*b/w.words.length}return a}function o(a){var b=null;return d.words.length>0?b=d.words.shift():a&&d.unknownWords.length>0&&(b=d.unknownWords.shift()),b}function p(){c.WORD_KNOWN=!0,b.word.isKnown(w.currentWord.Id,!0).then(function(a){a.Result&&(w.currentWord.__isUnknown=!1,d.knownWords.push(w.currentWord),r(w.currentWord,!0),s()),c.WORD_KNOWN=!1})}function q(){c.WORD_UNKNOWN=!0,b.word.isKnown(w.currentWord.Id,!1).then(function(a){a.Result&&(w.currentWord.__isUnknown=!0,d.unknownWords.push(w.currentWord),r(w.currentWord,!1),s()),c.WORD_UNKNOWN=!1})}function r(a,b){d.orders.push({id:a.Id,word:a.Word,answer:b})}function s(){w.currentWord=o(!1),null==w.currentWord&&(w.currentView=e.SUCCESS,w.results=u())}function t(){for(var a=0,b=0,c=0;c<d.orders.length;c++)1!=d.orders[c].answer||0!=c&&1!=d.orders[c-1].answer?a=0:(a++,a>b&&(b=a));return b}function u(){return{goodAnswers:d.knownWords.length,wrongAnswers:d.unknownWords.length,wrongWords:d.unknownWords,tier:w.wordsTier,combo:t()}}function v(){i(),s(),w.currentView=e.LEARNING}var w=this;w.collection=null,w.words=null,w.currentWord=null,w.currentView=null,w.wordsTier=a.tier,w.showAllCollections=f.myLibrary.allCollections,w.openCollection=f.myLibrary.collection,w.isLoading=j,w.getProgressForKnownWords=m,w.getProgressForUnknownWords=n,w.markWordAsKnown=p,w.markWordAsUnknown=q,w.getResults=u,w.restartLearning=v,w.results=null,w.isKnownWordLoading=k,w.isUnknownWordLoading=l,g()}angular.module("wordStormApp.pages").directive("learningPage",a);var c={COLLECTION:!1,INITIALIZING:!1,WORD_KNOWN:!1,WORD_UNKNOWN:!1},d={knownWords:null,unknownWords:null,words:null,orders:null},e={LEARNING:"angular/pages/learning/views/learning-page-main-view.html",SUCCESS:"angular/pages/learning/views/learning-page-success-view.html",NO_WORDS:"angular/pages/learning/views/learning-page-no-words-view.html"};b.$inject=["$stateParams","rest","pages"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/main-page/main-page.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b){function d(){a.isPersonLogged()?b.myLibrary.allCollections():i.currentView=c.VIDEO}function e(){i.currentView=c.VIDEO}function f(){return i.currentView==c.VIDEO}function g(){i.currentView=c.ANOTHER}function h(){return i.currentView==c.ANOTHER}var i=this;i.currentView=null,i.isUserLogged=a.isPersonLogged,i.openVideoView=e,i.isVideoView=f,i.openAnotherView=g,i.isAnotherView=h,d()}angular.module("wordStormApp.pages").directive("mainPage",a);var c={VIDEO:{name:"video",template:"angular/pages/main-page/views/main-page-video-view.html"},ANOTHER:{name:"another",template:"angular/pages/main-page/views/main-page-another-view.html"}};b.$inject=["userPanelService","pages"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/my-library/my-library-page.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b,d,e,f,g){function h(){i(null,null,!0)}function i(a,d,e,f){return c.COLLECTION_LIST=!0,b.collection.getAll(a,d,e,f).then(function(a){null!=a.Result&&(t.collection=a.Result),c.COLLECTION_LIST=!1})}function j(){return{removeCollection:k,editCollection:l,selectedCollections:[],addCollection:d.myLibrary.addCollection}}function k(a){for(var c=0;c<t.collection.length;c++)t.collection[c].Id==a&&t.collection.splice(c,1);return b.collection.getAll(null,null,!0,!0)}function l(a){return b.collection.getAll(null,null,!0,!0)}function m(){return c.COLLECTION_LIST}function n(a,b){for(var c=o(b),d=c.split(" "),f=0;f<d.length;f++){var g=d[f],h=o(a.Name);if(!(h.indexOf(g)>=0)){var i=a.TotalWords,j=a.TotalKnownWords;if(g!=i&&g!=j){var k=a.IsPublic,l=o(k?e.instant("myLibrary.collections.public"):e.instant("myLibrary.collections.private"));if(!(l.indexOf(g)>=0))return!1}}}return!0}function o(a){return null!=a?a.toString().toLowerCase().replace(/\s+/g," "):""}function p(){return{onViewChange:function(){t.parametersForCollectionsList.selectedCollections=[]}}}function q(){return c.REMOVING_SELECTED}function r(){return t.parametersForCollectionsList.selectedCollections.length>0}function s(){var a=t.parametersForCollectionsList.selectedCollections;c.REMOVING_SELECTED=!0,b.collection.removeList(a).then(function(b){b.Result&&(g.addGlobalAlert({title:"messages.collections.remove.success",titleParams:{collectionsCount:a.length},type:"success"}),t.parametersForCollectionsList.selectedCollections.length=0),i(null,null,!0,!0),c.REMOVING_SELECTED=!1})}var t=this;t.collection=null,t.isLoading=m,t.collectionAddElement=f.collectionAddElement,t.refreshCollectionsList=i,t.collectionListFilter=n,t.parametersForCollectionsList=j(),t.listableDataEvents=p(),t.isAnyCollectionSelected=r,t.isRemovingSelected=q,t.removeSelectedCollections=s,h()}angular.module("wordStormApp.pages").directive("myLibraryPage",a);var c={COLLECTION_LIST:!1,REMOVING_SELECTED:!1};b.$inject=["$stateParams","rest","pages","$translate","config","alerts"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/public-library/public-library-page.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b,d,e,f,g){function h(){i(null,null,!0)}function i(a,d,e,f){return c.COLLECTION_LIST=!0,b.collection.getPublic(a,d,e,f).then(function(a){null!=a.Result&&(t.collection=a.Result),c.COLLECTION_LIST=!1})}function j(){return{removeCollection:k,editCollection:l,selectedCollections:[]}}function k(a){for(var c=0;c<t.collection.length;c++)t.collection[c].Id==a&&t.collection.splice(c,1);return b.collection.getAll(null,null,!0,!0)}function l(a){return b.collection.getAll(null,null,!0,!0)}function m(){return c.COLLECTION_LIST}function n(a,b){for(var c=o(b),d=c.split(" "),f=0;f<d.length;f++){var g=d[f],h=o(a.Name);if(!(h.indexOf(g)>=0)){var i=a.TotalWords,j=a.TotalKnownWords;if(g!=i&&g!=j){var k=a.IsPublic,l=o(k?e.instant("myLibrary.collections.public"):e.instant("myLibrary.collections.private"));if(!(l.indexOf(g)>=0))return!1}}}return!0}function o(a){return null!=a?a.toString().toLowerCase().replace(/\s+/g," "):""}function p(){return{onViewChange:function(){t.parametersForCollectionsList.selectedCollections=[]}}}function q(){return c.REMOVING_SELECTED}function r(){return t.parametersForCollectionsList.selectedCollections.length>0}function s(){var a=t.parametersForCollectionsList.selectedCollections;c.REMOVING_SELECTED=!0,b.collection.removeList(a).then(function(b){b.Result&&(g.addGlobalAlert({title:"messages.collections.remove.success",titleParams:{collectionsCount:a.length},type:"success"}),t.parametersForCollectionsList.selectedCollections.length=0),i(null,null,!0,!0),c.REMOVING_SELECTED=!1})}var t=this;t.listSize=f.maxItemsOnList,t.collection=null,t.isLoading=m,t.addCollection=d.myLibrary.addCollection,t.refreshCollectionsList=i,t.collectionListFilter=n,t.parametersForCollectionsList=j(),t.listableDataEvents=p(),t.isAnyCollectionSelected=r,t.isRemovingSelected=q,t.removeSelectedCollections=s,h()}angular.module("wordStormApp.pages").directive("publicLibraryPage",a);var c={COLLECTION_LIST:!1,REMOVING_SELECTED:!1};b.$inject=["$stateParams","rest","pages","$translate","config","alerts"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/register/register.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b){function c(){return{email:null,password:null,confirmPassword:null}}function d(){var a=i.formData.password,b=i.formData.confirmPassword;return null!=a&&a==b}function e(a){a.$setPristine(),a.$setUntouched(),i.formData=c(),i.errors=null}function f(){var a=c();return i.formData.email!=a.email||i.formData.password!=a.password||i.formData.confirmPassword!=a.confirmPassword}function g(c){i.formSending=!0,a.register.create(i.formData).then(function(a){a&&(null!=a.responseError?h(a.responseError):(b.addGlobalAlert({title:"register.alerts.success.title",titleParams:{name:i.formData.email},subtitle:"register.alerts.success.subtitle",type:"success"}),e(c))),i.formSending=!1})}function h(a){i.errors={};for(var b=0;b<a.length;b++){var c=a[b].ErrorName;switch(c){default:i.errors[c]=!0}}}var i=this;i.formData=c(),i.isPasswordValid=d,i.clearForm=e,i.isFormFilled=f,i.register=g,i.formSending=!1,i.errors=null}angular.module("wordStormApp.pages").directive("registerPage",a),b.$inject=["rest","alerts"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/upload-file/upload-file-page.directive.html",controller:c,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a){return{restrict:"A",scope:{changeFunction:"="},link:function(a,b,c){b.bind("change",function(){a.changeFunction(b[0].files[0])})}}}function c(a,b,c,f,g){function h(){t.errors=i(),t.view=d.INPUT,j()}function i(){return{FileExtensionInvalid:!1,FileSizeTooLarge:!1}}function j(){e.SENDING=!1}function k(a){m(a)&&(e.SENDING=!0),f.$apply()}function l(a){e.SENDING=!0}function m(a){return t.errors=i(),null!=a&&o(a.name)&&n(a.size)}function n(a){var b=c.uploadFileMaxSizeInMb,d=1024*a*1024;return d<=b||(t.errors.FileSizeTooLarge=!0,!1)}function o(a){if(a)for(var b=c.uploadFileExtensions,d=a.split(".").pop(),e=0;e<b.length;e++)if(d==b[e])return!0;return t.errors.FileExtensionInvalid=!0,!1}function p(){return c.uploadFileExtensions.join(", ")}function q(){return c.uploadFileMaxSizeInMb}function r(){return t.errors.FileExtensionInvalid}function s(){return e.SENDING}var t=this;t.manualInputSelected=!1,t.errors=null,t.view=null,t.uploadFile=k,t.sendManualInput=l,t.getAllowedFileExtensions=p,t.getAllowedMaxSize=q,t.hasError=r,t.isDataSending=s,t.showAllCollections=g.myLibrary.allCollections,h()}angular.module("wordStormApp.pages").directive("uploadFilePage",a).directive("uploadFileModel",b),b.$inject=["$parse"];var d={INPUT:"angular/pages/upload-file/views/upload-file-input-view.html"},e={SENDING:!1};c.$inject=["rest","alerts","config","$scope","pages"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/pages/word/word-page.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{view:"@"}}}function b(a,b,g){function h(){var b=a.wordId;C.selectedView=null!=C.view?e[C.view]:e[c.FORM],null!=b?k(b).then(function(){m()&&p()}):n()&&(p(),y())}function i(){var a=j();b.myLibrary.collection(a.Id,a.Name)}function j(){return{Id:null!=C.word?C.word.Collection.Id:a.collectionId,Name:null!=C.word?C.word.Collection.Name:a.collectionName}}function k(a,b,c){return d.WORD=!0,g.word.get(a).then(function(a){null!=a.Result&&(C.word=a.Result,d.WORD=!1)})}function l(){return d.WORD}function m(){return C.view==c.EDIT}function n(){return C.view==c.ADD}function o(){return d.SENDING_FORM}function p(){C.formData=q()}function q(){return null!=C.word?angular.copy(C.word):{Word:null,Pronunciation:null,Translations:[],PartOfSpeech:null}}function r(a){if(null!=C.formData){var b=C.formData;return a.Word!=b.Word||a.Pronunciation!=b.Pronunciation||a.PartOfSpeech!=b.PartOfSpeech}return!1}function s(a){var b=!1;if(null!=C.formData){var c=C.formData.Translations,d=a.Translations;if(d.length!=c.length)b=!0;else for(var e=0;e<c.length;e++)if(c[e].Translation!=d[e].Translation||c[e].PartOfSpeech!=d[e].PartOfSpeech){b=!0;break}}return b}function t(){var a=!1;if(null!=C.formData){var b=C.formData,c=b.Word&&b.Pronunciation&&b.Translations&&b.Translations.length>0;if(c){a=!0;for(var d=b.Translations,e=0;e<d.length;e++)if(!d[e].Translation||!d[e].PartOfSpeech){a=!1;break}}}return a}function u(a){return a.slice(f.length)}function v(){var a=q(),b=!1;return t()&&(b=r(a)||s(a)),b}function w(a){a.$setPristine(),a.$setUntouched(),C.formData=q()}function x(a){for(var b=0;b<C.formData.Translations.length;b++){var c=C.formData.Translations[b];c.PartOfSpeech=u(c.PartOfSpeech)}n()?A():m()&&B()}function y(){C.formData.Translations.push(z())}function z(){return{Translation:null}}function A(){var a=j();d.SENDING_FORM=!0,g.word.create(a.Id,[C.formData]).then(function(c){null!=c.Result&&b.myLibrary.collection(a.Id,a.Name),d.SENDING_FORM=!1})}function B(){d.SENDING_FORM=!0,g.word.edit([C.formData]).then(function(a){null!=a.Result&&b.myLibrary.allCollections(),d.SENDING_FORM=!1})}var C=this;C.word=null,C.formData=null,C.selectedView=null,C.isLoading=l,C.showAllCollections=b.myLibrary.allCollections,C.showCollection=i,C.getSimpleCollection=j,C.addEmptyTranslation=y,C.canSaveForm=v,C.clearForm=w,C.sendForm=x,C.isFormSending=o,h()}angular.module("wordStormApp.pages").directive("wordPage",a);var c={EDIT:"edit",ADD:"add",VIEW:"view"},d={WORD:!1,SENDING_FORM:!1},e={edit:"angular/pages/word/views/word-page-form-view.html",add:"angular/pages/word/views/word-page-form-view.html"},f="enums.partOfSpeech.";b.$inject=["$stateParams","pages","rest"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/alerts/alerts.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{group:"@",overflowing:"="}}}function b(a){function b(){return a.getAlertsForGroup(f.group)}function d(a){var b=null;if(null!=a.icon)b="glyphicon-"+a.icon;else switch(a.type){case c.ERROR:b="glyphicon-remove";break;case c.WARNING:b="glyphicon-exclamation-sign";break;default:b="glyphicon-ok"}return b}function e(b){a.removeAlert(b,f.group)}var f=this;f.alerts=b(),f.getIconForAlert=d,f.removeAlert=e}angular.module("wordStormApp.components").directive("alerts",a);var c={SUCCESS:"success",WARNING:"warning",ERROR:"error"};b.$inject=["alerts"]}(),function(){function a(a,c){function d(a){e(a,b)}function e(b,d){var e=f(d);if(0!=b.autoDelete){var g=b.displayTime||a.defaultAlertsDisplayTimeInSec;c(function(){h(b,d)},1e3*g)}e.push(b)}function f(a){var b=j[a];return null==b&&(j[a]=[],b=j[a]),b}function g(a){return f(a)}function h(a,c){c=c||b;for(var d=g(c),e=0;e<d.length;e++)if(d[e].title==a.title){d.splice(e,1);break}}var i=this,j={};i.addGlobalAlert=d,i.getAlertsForGroup=g,i.removeAlert=h}angular.module("wordStormApp.services").service("alerts",a);var b="global-alerts";a.$inject=["config","$timeout"]}(),function(){function a(a){return{link:function(b,c,d){var e=d.useAutoFocus;e&&a(function(){c[0].focus()})}}}angular.module("wordStormApp.components").directive("autoFocus",a),a.$inject=["$timeout"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/change-language/change-language.directive.html",
controller:b,controllerAs:"ctrl",bindToController:!0,scope:{availableLanguages:"="}}}function b(a){function b(b){a.use(b)}function c(b){return b==a.use()}var d=this;d.changeLanguage=b,d.isActiveLanguage=c}angular.module("wordStormApp.components").directive("changeLanguage",a),b.$inject=["$translate"]}(),function(){function a(a){return{restrict:"E",replace:!0,link:function(b,c,d){var e=a(d.html)(b);c.replaceWith(e)}}}angular.module("wordStormApp.components").directive("compileHtml",a),a.$inject=["$compile"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/dev-panel/dev-panel.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{autoRefresh:"="}}}function b(a,b,c){function d(){f(),e()}function e(){i.domElements=c.countDomElements()}function f(){k=!0;var a=c.countWatchers(j);i.watchers=a.watchers,i.watchersWithoutDuplicates=a.watchersWithoutDuplicates,k=!1}function g(){return k}function h(){i.panelEnabled=!i.panelEnabled,i.panelEnabled?l=b.$watch(d):null!=l&&l()}var i=this,j=angular.element(document.getElementsByTagName("body")),k=!1,l=null;i.watchers=0,i.watchersWithoutDuplicates=0,i.domElements=0,i.isLoading=g,i.panelEnabled=!0,i.refresh=d,i.toggleEnabled=h,1==i.autoRefresh&&(l=b.$watch(d),b.$on("$destroy",function(){l()}))}angular.module("wordStormApp.components").directive("devPanel",a),b.$inject=["$timeout","$scope","devPanelService"]}(),function(){function a(a){function b(a){var b=a||document;return b.getElementsByTagName("*").length}function c(a,b,d){var e=b||[],f=d||[];return angular.forEach(["$scope","$isolateScope"],function(b){a.data()&&a.data().hasOwnProperty(b)&&angular.forEach(a.data()[b].$$watchers,function(a){e.push(a)})}),angular.forEach(a.children(),function(a){c(angular.element(a),e,f)}),angular.forEach(e,function(a){f.indexOf(a)<0&&f.push(a)}),{watchers:e.length,watchersWithoutDuplicates:f.length}}var d=this;d.countWatchers=c,d.countDomElements=b}angular.module("wordStormApp.services").service("devPanelService",a),a.$inject=["$rootScope"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/form-field/form-field.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{name:"@",type:"@",placeholder:"@",label:"@",model:"=",errorOccured:"=",isRequired:"=",tooltip:"@",form:"=",labelPosition:"@",useAutoFocus:"=",selectOptions:"="},transclude:{errors:"?fieldErrors",ownField:"?fieldOwnInput"}}}function b(a){function b(){return a.trustAsHtml(f.tooltip)}function d(){var a="field-label";switch(f.labelPosition){case c.TOP:a+=" col-xs-12 col-sm-12 col-md-12 col-lg-12 top";break;case c.NONE:a+=" hidden-xs hidden-sm hidden-md hidden-lg none";break;default:a+=" col-xs-12 col-sm-5 col-md-4 col-lg-4 left"}return a}function e(){var a="field-input";switch(f.labelPosition){case c.TOP:a+=" col-xs-10 col-sm-10 col-md-10 col-lg-10 top";break;case c.NONE:a+=" col-xs-10 col-sm-10 col-md-10 col-lg-10 none";break;default:a+=" col-xs-10 col-sm-5 col-md-6 col-lg-6 left"}return a}var f=this;f.getTooltipContent=b,f.getColumSizeForLabel=d,f.getColumSizeForInput=e}angular.module("wordStormApp.components").directive("formField",a);var c={TOP:"top",LEFT:"left",NONE:"none"};b.$inject=["$sce"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/listable-data-tiles/collection/collection-tile.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{item:"=",parameters:"=",searchText:"=",mode:"=",controlItem:"@"}}}function b(a,b){function f(){y.parameters&&y.parameters.addCollection&&y.parameters.addCollection()}function g(){var a=y.item.TotalWords>0?1*y.item.TotalKnownWords/y.item.TotalWords:1;return a}function h(b){null==z&&(null!=y.parameters&&y.parameters.readonly?a.myLibrary.collectionPreview(b.Id,b.Name,b):a.myLibrary.collection(b.Id,b.Name,b))}function i(){return"list"==y.mode?c.LIST:c.GRID}function j(){return d.REMOVE==z}function k(){return d.EDIT==z}function l(){z=d.REMOVE}function m(){z=d.EDIT,y.formData={Name:y.item.Name,IsPublic:y.item.IsPublic,Id:y.item.Id}}function n(){z=null,y.formData=null}function o(){return null==z}function p(){if(null!=y.parameters&&null!=y.parameters.selectedCollections){var a=y.parameters.selectedCollections.indexOf(y.item.Id);a<0?y.parameters.selectedCollections.push(y.item.Id):y.parameters.selectedCollections.splice(a,1)}}function q(){if(null!=y.parameters&&null!=y.parameters.selectedCollections){var a=y.parameters.selectedCollections.indexOf(y.item.Id);return a>=0}return!1}function r(){return null==y.parameters||1!=y.parameters.readonly}function s(){return e.REMOVING_COLLECTION}function t(){e.REMOVING_COLLECTION||(e.REMOVING_COLLECTION=!0,b.collection.remove(y.item.Id).then(function(a){null!=y.parameters&&null!=y.parameters.removeCollection&&y.parameters.removeCollection(y.item.Id),e.REMOVING_COLLECTION=!1}))}function u(){return e.EDITING_COLLECTION}function v(){e.EDITING_COLLECTION||(e.EDITING_COLLECTION=!0,b.collection.edit([y.formData]).then(function(a){null!=y.parameters&&null!=y.parameters.editCollection&&y.parameters.editCollection(y.item.Id),w(),n(),e.EDITING_COLLECTION=!1}))}function w(){y.item.Name=y.formData.Name,y.item.IsPublic=y.formData.IsPublic}function x(){return y.item.Name!=y.formData.Name||y.item.IsPublic!=y.formData.IsPublic}var y=this,z=null;y.selected=!1,y.getProgress=g,y.openCollection=h,y.getModeInclude=i,y.isRemoveMode=j,y.openRemoveMode=l,y.openEditMode=m,y.isEditMode=k,y.switchToNormalMode=n,y.isNormalMode=o,y.formData=null,y.removeCollection=t,y.isCollectionRemoving=s,y.editCollection=v,y.isCollectionEditing=u,y.hasCollectionChanged=x,y.selectCollection=p,y.isCollectionSelected=q,y.playLearningMode=a.learning.main,y.canDisplayActionButtons=r,y.openLearning=a.learning.main,y.addCollection=f}angular.module("wordStormApp.components").directive("collectionTile",a);var c={GRID:"angular/components/listable-data-tiles/collection/views/collection-tile-grid-view.html",LIST:"angular/components/listable-data-tiles/collection/views/collection-tile-list-view.html"},d={REMOVE:"remove",EDIT:"edit"},e={REMOVING_COLLECTION:!1,EDITING_COLLECTION:!1};b.$inject=["pages","rest"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/listable-data-tiles/translation/translation-tile.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{item:"=",parameters:"=",searchText:"=",index:"="}}}function b(a){function b(){d()}function d(){return g=!0,a.common.partOfSpeech().then(function(a){f.partOfSpeechEnum=a.map(function(a){return c+a}),g=!1})}function e(){f.parameters.list.splice(f.index,1)}var f=this,g=!1;f.removeTranslation=e,f.partOfSpeechEnum=null,b()}angular.module("wordStormApp.components").directive("translationTile",a);var c="enums.partOfSpeech.";b.$inject=["rest"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/listable-data-tiles/word/word-tile.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{item:"=",parameters:"=",searchText:"=",mode:"="}}}function b(a,b){function f(){var a=null;switch(s.mode){case"list":a=c.LIST;break;default:a=c.GRID}return a}function g(){return t==d.REMOVE}function h(){return null==t}function i(){return t==d.EXPANDED}function j(){t=d.REMOVE}function k(){t=null}function l(){i()?k():t=d.EXPANDED}function m(){e.REMOVING_COLLECTION=!0,b.word.remove([s.item.Id]).then(function(a){null!=s.parameters&&null!=s.parameters.removeItem&&s.parameters.removeItem(s.item.Id),e.REMOVING_COLLECTION=!1})}function n(){return e.REMOVING_COLLECTION}function o(){a.word.edit(s.item.Id,s.item.Word)}function p(){null==t&&a.word.show(s.item.Id,s.item.Word)}function q(){if(null!=s.parameters&&null!=s.parameters.selectedItems){var a=s.parameters.selectedItems.indexOf(s.item.Id);a<0?s.parameters.selectedItems.push(s.item.Id):s.parameters.selectedItems.splice(a,1)}}function r(){if(null!=s.parameters&&null!=s.parameters.selectedItems){var a=s.parameters.selectedItems.indexOf(s.item.Id);return a>=0}return!1}var s=this,t=null;s.isRemoveMode=g,s.isNormalMode=h,s.isExpandedMode=i,s.switchToRemoveMode=j,s.switchToNormalMode=k,s.switchToEditMode=o,s.switchExpandedMode=l,s.removeItem=m,s.isRemoving=n,s.openWord=p,s.getViewForMode=f,s.selectItem=q,s.isItemSelected=r}angular.module("wordStormApp.components").directive("wordTile",a);var c={GRID:"angular/components/listable-data-tiles/word/views/word-tile-grid-view.html",LIST:"angular/components/listable-data-tiles/word/views/word-tile-list-view.html"},d={REMOVE:"remove",EXPANDED:"expanded"},e={REMOVING_COLLECTION:!1};b.$inject=["pages","rest"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/listable-data/listable-data.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{list:"=",groupField:"@",refreshDataAction:"&",displayDirectiveName:"@",displayDirectiveParameters:"=",filterFunction:"=",reduceListFunction:"=",view:"@",noViewChange:"=",scrollableBody:"=",events:"=",noButtons:"=",noSearch:"=",addElement:"@"},transclude:{listEmpty:"?listableDataEmptyList",headerRight:"?listableDataHeaderRight"}}}function b(a,b){function d(){e(),s.pagination=a.DEFAULT_LIST_PAGINATION.get()}function e(){s.listCurrentPage=1}function f(){e(),a.DEFAULT_LIST_PAGINATION.set(s.pagination)}function g(){return t}function h(){s.searchText=null,t=!t}function i(b){s.viewMode=b,a.DEFAULT_LIST_TYPE.set(b),null!=s.events&&null!=s.events.onViewChange&&s.events.onViewChange(b)}function j(){return s.viewMode==c.LIST}function k(){return s.viewMode==c.GRID}function l(){var a="<"+s.displayDirectiveName;return a+=" parameters='ctrl.displayDirectiveParameters'",a+=" mode='ctrl.viewMode'",a+=" control-item='"+s.addElement+"'",a+=" item='item'",a+="></"+s.displayDirectiveName+">"}function m(a){var b="<"+s.displayDirectiveName;return b+=" search-text='ctrl.searchText'",b+=" parameters='ctrl.displayDirectiveParameters'",b+=" mode='ctrl.viewMode'",b+=" item='item'",b+=" index='$index'",b+="></"+s.displayDirectiveName+">"}function n(a){if(null!=s.reduceListFunction){var b=s.reduceListFunction(a);return b&&null!=s.filterFunction&&null!=s.searchText&&s.searchText.length>0?s.filterFunction(a,s.searchText):b}return!(null!=s.filterFunction&&null!=s.searchText&&s.searchText.length>0)||s.filterFunction(a,s.searchText)}function o(){return a.DEFAULT_LIST_TYPE.get()}function p(){return s.pagination||s.list.length}function q(){var a=null;return null!=s.pagination&&(a=(s.listCurrentPage-1)*s.pagination),a}function r(){return b.paginationSizes}var s=this,t=!1;s.viewMode=null!=s.view?s.view:o(),s.pagination=null,s.isSearchModeOn=g,s.switchSearchMode=h,s.searchText=null,s.switchToViewMode=i,s.isListMode=j,s.isGridMode=k,s.createDirectiveForItem=m,s.createControlDirective=l,s.filterItems=n,s.listCurrentPage=null,s.filteredList=null,s.getMaxListSize=p,s.getListStartItem=q,s.refreshPagination=e,s.getAvailablePaginations=r,s.updatePagination=f,d()}angular.module("wordStormApp.components").directive("listableData",a);var c={LIST:"list",GRID:"grid"};b.$inject=["settings","config"]}(),function(){function a(a,b,c){return{priority:1001,terminal:!0,restrict:"A",replace:!0,link:function(d,e,f){var g=b.allowedLanguages.length>1,h=f.locale;if(h){if(e.removeAttr("locale"),g)e.attr("translate",h);else{var i=c.instant(h);e.text(i)}var j=a(e)(d);e.replaceWith(j)}}}}angular.module("wordStormApp.components").directive("locale",a),a.$inject=["$compile","config","$translate"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/navbar/navbar.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b,c){function d(){f()}function e(){c.logPersonOut().then(function(a){b.home()})}function f(){return l=!0,c.checkPersonLogged().then(function(){var a=c.isPersonLogged();a&&g(),l=!1})}function g(){return m=!0,c.loadPersonData().then(function(a){k.userData=a,m=!1})}function h(){return l||m}function i(){return b.isPageOpened("myLibrary")||b.isPageOpened("collection")||b.isPageOpened("addCollection")||b.isPageOpened("word")||b.isPageOpened("addWord")||b.isPageOpened("editWord")||b.isPageOpened("learning")||b.isPageOpened("uploadFile")||b.isPageOpened("editCollection")}function j(){return b.isPageOpened("collectionPreview")||b.isPageOpened("publicLibrary")}var k=this,l=!1,m=!1;k.displayDevMode=1==a.devMode,k.displaySearchBar=null!=a.searchUrl,k.userData=null,k.openHomePage=b.home,k.openPublicLibrary=b.publicLibrary.main,k.openMyLibrary=b.myLibrary.allCollections,k.openUploadFile=b.uploadFile,k.logout=e,k.isPersonLogged=c.isPersonLogged,k.getLoggedUserName=c.loadPersonData,k.isLoading=h,k.isMyLibraryOpened=i,k.isPublicLibraryOpened=j,d()}angular.module("wordStormApp.components").directive("navbar",a),b.$inject=["config","pages","userPanelService"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/page/page.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{backgroundImage:"@",pageClass:"@",headerClass:"@",bodyClass:"@",isLoading:"=",scrollableBody:"=",disallowNotLogged:"=",disallowLogged:"="},transclude:{header:"?pageHeader",headerLeft:"?pageHeaderLeft",headerRight:"?pageHeaderRight",body:"pageBody",footer:"?pageFooter",bodyTop:"?pageBodyTop"}}}function b(a,b,c){function d(){g.disallowNotLogged?b.checkPersonLogged().then(function(){var a=b.isPersonLogged();a||c.authError()}):g.disallowLogged&&b.checkPersonLogged().then(function(){var a=b.isPersonLogged();a&&c.home()})}function e(b){return a.isSlotFilled(b)}function f(){return e("header")||e("headerLeft")||e("headerRight")}var g=this;g.isTranscludeGiven=e,g.showHeader=f,d()}angular.module("wordStormApp.components").directive("page",a),b.$inject=["$transclude","userPanelService","pages"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/progress-bar/progress-bar.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{progress:"=",maxProgress:"=",type:"@",background:"@",tooltip:"@"},transclude:{content:"?progressContent"}}}function b(a){function b(){var b=a.find(".progress-bar")[0],c=d();f=new ProgressBar.Circle(b,{color:"transparent",trailColor:"#ccc",fill:e.background,trailWidth:2,duration:3e3,easing:"bounce",strokeWidth:3,from:{color:c.FROM,a:0},to:{color:c.TO,a:e.maxProgress?e.maxProgress:1},step:function(a,b){b.path.setAttribute("stroke",a.color)}}),f.animate(e.progress)}function d(){return c.GREEN}var e=this,f=null;b()}angular.module("wordStormApp.components").directive("progressBar",a);var c={GREEN:{FROM:"#9a0808",TO:"#5db100"}};b.$inject=["$element"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/register-panel/register-panel.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b){function c(){return{email:null,password:null,confirmPassword:null}}function d(){var a=i.formData.password,b=i.formData.confirmPassword;return null!=a&&a==b}function e(a){a.$setPristine(),a.$setUntouched(),i.formData=c(),i.errors=null}function f(){var a=c();return i.formData.email!=a.email||i.formData.password!=a.password||i.formData.confirmPassword!=a.confirmPassword}function g(c){i.formSending=!0,a.register.create(i.formData).then(function(a){a&&(null!=a.responseError?h(a.responseError):(b.addGlobalAlert({title:"register.alerts.success.title",titleParams:{name:i.formData.email},subtitle:"register.alerts.success.subtitle",type:"success"}),e(c))),i.formSending=!1})}function h(a){i.errors={};for(var b=0;b<a.length;b++){var c=a[b].ErrorName;switch(c){default:i.errors[c]=!0}}}var i=this;i.formData=c(),i.isPasswordValid=d,i.clearForm=e,i.isFormFilled=f,i.register=g,i.formSending=!1,i.errors=null}angular.module("wordStormApp.components").directive("registerPanel",a),b.$inject=["rest","alerts"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/sidebar/sidebar.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b){function c(){f.sidebarOpened=!f.sidebarOpened}function d(){f.sidebarOpened=!1}function e(){f.sidebarOpened=!0}var f=this;f.sidebarOpened=!1,f.toggleSidebar=c,f.closeSidebar=d,f.openSidebar=e,f.isPageOpened=a.isPageOpened,f.isPersonLogged=b.isPersonLogged,f.openMyLibrary=a.myLibrary.allCollections,f.openPublicLibrary=a.publicLibrary.main,f.openRegisterPage=a.register,f.openUploadFilePage=a.uploadFile}angular.module("wordStormApp.components").directive("sidebar",a),b.$inject=["pages","userPanelService"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/special-characters-keyboard/special-characters-keyboard.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{model:"=",isRequired:"=",display:"@",name:"@",placeholder:"@"}}}function b(a,b){function f(){return b.DEFAULT_SPECIAL_CHARACTERS_COLOR.get()}function g(){return e.SIMPLE==l.display?d.DISABLED:d.OUTSIDE}function h(a){null==l.model?l.model=a:l.model+=a}function i(a){l.keyboardColor=a,b.DEFAULT_SPECIAL_CHARACTERS_COLOR.set(a)}function j(){return e.WITH_BUTTON==l.display}function k(){return e.SIMPLE==l.display}var l=this;l.englishCharacters=a.specialCharacters.english,l.polishCharacters=a.specialCharacters.polish,l.keyboardColors=c,l.keyboardColor=f(),l.closingPolicy=g(),l.changeKeysColor=i,l.addCharacter=h,l.isWithButton=j,l.isOpen=k}angular.module("wordStormApp.components").directive("specialCharactersKeyboard",a);var c=["green","blue","orange"],d={ALWAYS:"always",OUTSIDE:"outsideClick",DISABLED:"disabled"},e={WITH_BUTTON:"button",SIMPLE:"simple"};b.$inject=["config","settings"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/spinner/spinner.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{spinnerClass:"@"}}}function b(){}angular.module("wordStormApp.components").directive("spinner",a),b.$inject=[]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/user-panel/user-panel.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{open:"=",closeSidebar:"&",openSidebar:"&"}}}function b(a,b){function d(){f()}function e(){return c.LOGGED_IN==l.view}function f(){return m=!0,a.checkPersonLogged().then(function(){var b=a.isPersonLogged();b&&g(),l.view=b?c.LOGGED_IN:c.LOG_IN_FORM,m=!1})}function g(){return n=!0,a.loadPersonData().then(function(a){l.userData=a,n=!1})}function h(){return m||n}function i(d,e){l.loggingInProcess=!0,l.errors=null,a.logPersonIn(d,e).then(function(a){a&&null==a.responseError?g().then(function(){l.view=c.LOGGED_IN,k(),b.myLibrary.allCollections()}):l.errors={WrongUsernameOrPassword:!0},l.loggingInProcess=!1})}function j(){a.logPersonOut().then(function(){l.view=c.LOG_IN_FORM,k(),b.home()})}function k(){l.closeSidebar&&l.closeSidebar()}var l=this,m=!1,n=!1;l.view=c.LOG_IN_FORM,l.loggingInProcess=!1,l.errors=null,l.isLoading=h,l.logIn=i,l.logOut=j,l.isPersonLogged=e,l.goToRegisterPage=b.register,l.userData=null,d()}angular.module("wordStormApp.components").directive("userPanel",a);var c={LOG_IN_FORM:"angular/components/user-panel/views/form.html",LOGGED_IN:"angular/components/user-panel/views/logged-in.html"};b.$inject=["userPanelService","pages"]}(),function(){function a(a,b){function c(b){return 1!=b&&null!=j||(j=a.user.isLogged().then(function(a){k=null!=a&&a.Result})),j}function d(a){return c(a)}function e(){return k}function f(c,d){return a.user.login(c,d).then(function(a){if(null==a||null!=a.responseError)return k=!1,!1;var c=a.Result;return b.credentials.store(c),k=!0,!0})}function g(){return k=!1,b.credentials.remove(),a.user.logout()}function h(){return a.user.profile().then(function(a){return a.Result?a.Result:null})}var i=this,j=null,k=!1;i.isPersonLogged=e,i.checkPersonLogged=d,i.logPersonIn=f,i.logPersonOut=g,i.loadPersonData=h}angular.module("wordStormApp.services").service("userPanelService",a),a.$inject=["rest","cookies"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/word-card/word-card.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{word:"="}}}function b(){function a(){d.selectedView=c.WORD}function b(){var a=d.selectedView==c.WORD?c.TRANSLATION:c.WORD;d.selectedView=a}var d=this;d.selectedView=null,d.switchToAnotherView=b,a()}angular.module("wordStormApp.components").directive("wordCard",a);var c={WORD:"word",TRANSLATION:"translation"};b.$inject=[]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/word-search/word-search.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b){function c(){d.word&&b.open(e+d.word)}var d=this,e=a.searchUrl;d.word=null,d.findWord=c}angular.module("wordStormApp.components").directive("wordSearch",a),b.$inject=["config","$window"]}(),function(){function a(){return{restrict:"E",templateUrl:"angular/components/wordstorm/wordstorm.directive.html",controller:b,controllerAs:"ctrl",bindToController:!0,scope:{}}}function b(a,b,c){function d(){i.ngModelOptions=e(),j=!0,c.checkPersonLogged().then(function(){j=!1})}function e(){return{debounce:b.defaultDebounceTimeInMs}}function f(){return j}function g(){a.home()}function h(){return b.allowedLanguages}var i=this,j=!1;i.ngModelOptions=null,i.goToHome=g,i.displayDevMode=1==b.devMode,i.displaySearchBar=null!=b.searchUrl,i.displayLanguageChange=null!=h()&&h().length>1,i.getAvailableLanguages=h,i.isLoading=f,d()}angular.module("wordStormApp.components").directive("wordStorm",a),b.$inject=["pages","config","userPanelService"]}();